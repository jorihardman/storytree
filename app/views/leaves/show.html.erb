<h1><%= @leaf.root.seed_detail.title %></h1>

<div id='story' class='dialogue'>
  <% @leaf.ancestors.each do |leaf|  %>
    <div id='<%= leaf.id %>' class='page'>
      <%= leaf.leaf_text %>
    </div>
  <% end %>
  <div id='<%= @leaf.id %>' class='page'>
    <%= @leaf.leaf_text %>
  </div>
</div>

<h3>Choose the next Leaf</h3>
<div id='branches' class='dialogue' style='display:none;'>
  <%= render 'leaves/branches' %>
</div>

<h3>Write your own Leaf</h3>
<div id='leaf' class='dialogue'>
  <%= form_for @branch, :remote => true do |f| %>
    <%= f.text_area :leaf_text, :rows => 5 %><br/>
    <%= f.hidden_field :parent_id, :value => @leaf.id %>
    <%= f.hidden_field :user_id, :value => current_user.id %>
    <%= f.submit 'Add' %>
  <% end %>
</div>
